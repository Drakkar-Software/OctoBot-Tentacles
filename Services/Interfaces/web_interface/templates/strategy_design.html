{% extends "layout.html" %}
{% set active_page = "strategy_design" %}
{% set show_nab_bar = False %}

{% import 'macros/strategy_design_optimizer_settings.html' as m_strategy_design_optimizer_settings %}


{% block body %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/strategy_design.css', u=LAST_UPDATED_STATIC_FILES) }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/w2ui_template.css', u=LAST_UPDATED_STATIC_FILES) }}">


<style>


/** temp fixes **/

/*Force full screen - remove container fluid */
.container-fluid {
    margin: 0;
    padding: 0;
}

/** remo bg image **/
body::before {
    background-image: none !important;
}

</style>

<nav id="new-nav" class="nav-tabs brdr-b d-flex bg-dark">
    <div id="logo-and-menu" class="d-flex">
        <div class="main-dropdown-menu brdr-r main-nav-item">
            <a role="button" aria-expanded="false" type="button" class="navbar-toggler nav-h d-block" data-toggle="dropdown">
                <span><i class="fas fa-bars"></i></span>
            </a>
            <div class="dropdown-menu dropdown-default brdr-actv bg-dark" style="">
                 <a href="{{ url_for('home') }}" class="nav-link primary-tab-selector bg-dark bg-hvr"><i class="fas fa-home"></i> Home</a>
                <a href="{{ url_for('trading') }}" class="nav-link primary-tab-selector bg-dark bg-hvr"><i class="fas fa-chart-line"></i> Trading</a>
                <a href="{{ url_for('portfolio') }}" class="nav-link primary-tab-selector bg-dark bg-hvr"><i class="fas fa-chart-pie"></i> Portfolio</a>
                <a href="{{ url_for('profile') }}" class="nav-link primary-tab-selector bg-dark bg-hvr"><i class="fas fa-cog"></i> Profile</a>
                <a href="{{ url_for('accounts') }}" class="nav-link primary-tab-selector bg-dark bg-hvr"><i class="fas fa-link"></i> Accounts</a>
                <a href="{{ url_for('community') }}" class="nav-link primary-tab-selector bg-dark bg-hvr"><i class="fas fa-rss-square"></i> Community</a>
                <a href="{{ url_for('octobot_help') }}" class="nav-link primary-tab-selector bg-dark bg-hvr"><i class="fas fa-question-circle"></i> Help</a>
                <a href="{{ url_for('about') }}" class="nav-link primary-tab-selector bg-dark bg-hvr"><i class="fas fa-info-circle"></i> About</a>
            </div>
        </div>
        <div class="my-auto d-flex" id="octobot-logo">
            <img  src="{{url_for('static', filename='img/svg/octobot.svg')}}" alt="octobot-logo">
            <h4 class="d-none d-xl-inline m-auto">
                OctoBot
            </h4>
        </div>
    </div>
    <ul class="nav md-tabs toolbox-tabs row bg-dark m-0 w-100" id="nav-toolbox" role="tablist">
        <ul id="nav-bar-left" class="nav md-tabs toolbox-tabs bg-dark m-0 p-0 d-flex nav-h">
            <span id="time-frame-selector" class="scroll_horizontal brdr-l">
                <!-- repeat for each activated timeframe -->
                {% for time_frame in time_frames %}
                <li data-time-frame="{{time_frame}}"
                    class="active-timeframe {{'selected ' if loop.first}}bg-hvr h-100 main-nav-item"
                    id="active-{{time_frame}}-timeframe">
                  <a class="nav-h nav-lh d-block">{{time_frame}}</a>
                </li>
                {% endfor %}
            </span>

            <li class="dropdown h-100 noBorder main-nav-item"
                id="config-activated-time-frame-selector"
                data-strategy-config-url="{{ url_for('config_tentacles', action='update', reload='true') }}"
                data-strategy-tentacle="{{ activated_strategy.get_name() }}">
                <a class="nav-link timeframe-toggler nav-lh" data-toggle="dropdown" href="#" role="button"
                   aria-haspopup="true" aria-expanded="false">
                    <span><i class="fas fa-chevron-down"></i></span>
                </a>
                <form class="dropdown-menu brdr-actv dropdown-default bg-dark">
                    <!-- repeat for each available timeframe -->
                    {% for time_frame in exchange_time_frames %}
                    <div class="nav-link primary-tab-selector bg-dark" id="inactive-{{time_frame}}-timeframe">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" data-time-frame="{{time_frame}}" role="switch"
                                   id="{{time_frame}}-setting" class="custom-control-input config-time-frame-selector"
                                   {{'checked' if time_frame in enabled_time_frames}}>
                            <label class="custom-control-label w-100 h-100 px-3" for="{{time_frame}}-setting">{{time_frame}}</label>
                        </div>
                    </div>
                    {% endfor %}
                </form>
            </li>
            <ul class="nav md-tabs toolbox-tabs bg-dark noBorder scroll_horizontal nav-h" id="pairs-tabs" role="tablist">
                {% for symbol in symbols %}
                <li class="nav-item waves-effect waves-light h-100 main-nav-item">
                  <a class="nav-link primary-tab-selector h-100 symbol-selector show {{ 'active' if loop.first }}" id="{{symbol}}-tab" data-toggle="tab"
                     role="tab" aria-selected="{{ 'true' if first else 'false' }}" aria-controls="{{symbol}}"
                     href="#{{symbol}}"
                     data-symbol="{{symbol}}">
                      {{symbol}}
                  </a>
                </li>
                {% endfor %}
            </ul>
        </ul>
        <ul id="nav-bar-right" class="nav md-tabs toolbox-tabs bg-dark p-fixed">
            <li class="main-nav-item nav-h d-none d-md-inline">
                <div class="navbar-brand mx-auto font-weight-bolder my-1">
                    <i id="navbar-bot-status" class="fa fa-check" data-toggle="tooltip" data-placement="bottom" title="OctoBot operational"></i>
                </div>
            </li>
            <li class="main-nav-item waves-effect waves-light nav-h d-none d-md-inline">
              <a href="#" class="nav-link primary-tab-selector waves-effect bg-dark" title="Select exchange">
                  <img class="img-fluid product-logo d-none" src="" alt="{{exchange_name}}" id="exchange_logo"
                       url="{{url_for('exchange_logo', _external=True, name=exchange_name)}}">
              </a>
            </li>
            <li class="main-nav-item waves-effect waves-light nav-h brdr-l" id="add-evaluators">
              <a href="{{ url_for('advanced.evaluator_config') }}" class="nav-link primary-tab-selector bg-dark" title="enable and disable Evaluators">
                  <i class="fas fa-atom"></i><span class="d-none d-xl-inline"> Evaluators </span><i class="fas fa-plus add-evaluator"></i>
              </a>
            </li>
            <li class="main-nav-item waves-effect waves-light brdr-l nav-h">
                {% if (not is_login_required()) or (is_login_required() and is_authenticated()) %}
                <a class="nav-link" href="#" id="switchTradingState" aria-label="TradingSwitch">
                    {{ m_trading_state.display_trading_state(is_real_trading(get_current_profile()), get_enabled_trader(get_current_profile())) }}
                </a>
                {% endif %}
            </li>
            <li class="main-nav-item waves-effect waves-light brdr-l nav-h">
                <a class="nav-link waves-effect waves-light" href="{{ url_for('logs') }}" aria-label="Logs">
                    <i class="fa fa-bell" data-toggle="tooltip" data-placement="top" title="" data-original-title="Event logs">
                        <span id="errors-count-badge" class="badge badge-warning"></span>
                    </i>
                </a>
            </li>
        </ul>
    </ul>
</nav>



<div id="strategy_body" class="strategy_body bg-dark p-fixed w-100"
     data-exchange-id="{{exchange_id}}"
     data-exchange-name="{{exchange_name}}"
     data-exchange-details-url="{{url_for('api.first_exchange_details')}}"> <!-- add brdr-r-xl resizable for the sidebar and rm w-100 and d-none from sidebar-->
    <div class="resizable w-100" id="pairs-tabcontent">
        <div class="h-100" id="charts-div" role="tabreal">
                <div id="crosshair-h" class="hair d-none"></div>
                <div id="crosshair-v" class="hair d-none"></div>
            <div id="charts"
                 class="w-100 h-100"
                 data-live-url="{{url_for('plotted_data')}}"
                 data-backtesting-url="{{url_for('backtesting_main_plotted_data')}}"
                 data-backtesting-run-id-url="{{url_for('backtesting_run_id')}}"
            >


                <div id="main-chart-outer" class="resizable" >
                    <div id="main-chart" class="h-100">
                    </div>
                </div>
                <div class="draggable-resizer bg-dark-grey">
                </div>
                <div id="sub-chart" class="">
                </div>
            </div>
        </div>
    </div>


    <div id="toolbox" class="strategy-toolbox w-100 p-absolute">
        <div id="main-toolbox-tabs-outer" class=" brdr-t-xl brdr-b d-flex">
            <ul id="main-toolbox-tabs" role="tablist" class="nav nav-tabs md-tabs justify-content-center toolbox-tabs main-toolbox-tabs noBorder w-100">
                <li class="nav-item dropdown brdr-l">
                    <a class="nav-link dropdown-toggle collapsed" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                    aria-expanded="false">
                        <i class="fas fa-code"></i><span class="d-none d-md-inline"> Code Editor</span>
                    </a>
                    <div class="dropdown-menu brdr-actv dropdown-default bg-dark">
                        <a class="nav-link primary-tab-selector bg-dark bg-hvr open-toolbox-onclick noBorder" id="trading-editor-tab" data-toggle="tab" href="#trading-editor" role="tab"
                        aria-controls="trading-editor"
                        aria-selected="false">
                        trading script editor
                        </a>
                        <a class="nav-link primary-tab-selector bg-dark bg-hvr open-toolbox-onclick noBorder" id="backtesting-editor-tab" data-toggle="tab" href="#backtesting-editor" role="tab"
                        aria-controls="backtesting-editor"
                        aria-selected="false">
                        backtesting script editor
                        </a>
                    </div>
                </li>
                <li class="nav-item brdr-l">
                    <a class="nav-link primary-tab-selector open-toolbox-onclick" id="strategy-settings-tab" data-toggle="tab" href="#strategy-settings" role="tab"
                       aria-controls="strategy-settings"
                       aria-selected="true">
                        <i class="fas fa-cogs"></i><span class="d-none d-md-inline"> Strategy Settings <i id="move-strategy-settings" class="far fa-window-restore"></i></span>
                    </a>
                </li>
                <li class="nav-item brdr-l">
                    <a class="nav-link primary-tab-selector open-toolbox-onclick show active" id="backtesting-tab" data-toggle="tab" href="#backtesting" role="tab"
                       aria-controls="backtesting"
                       aria-selected="true">
                        <i class="fas fa-pray"></i><span class="d-none d-md-inline"> Backtesting</span>
                    </a>
                </li>
                <li class="nav-item brdr-l d-none">
                    <a class="nav-link primary-tab-selector open-toolbox-onclick" id="trading-tab" data-toggle="tab" href="#trading" role="tab"
                       aria-controls="trading"
                       aria-selected="false">
                        Trading
                    </a>
                </li>
                <li class="nav-item brdr-l">
                    <a class="nav-link primary-tab-selector open-toolbox-onclick" id="optimizer-tab" data-toggle="tab" href="#optimizer" role="tab"
                       aria-controls="optimizer"
                       aria-selected="false">
                        <i class="fas fa-user-astronaut"></i><span class="d-none d-md-inline"> Strategy Optimizer</span>
                    </a>
                </li>
               <div class="toolbox-buttons d-flex nav-item">
                   <a id="reload-script"
                           data-url="{{ url_for('update_plot_script') }}"
                           data-backtesting-url="{{ url_for('backtesting', action_type='start_backtesting_with_current_bot_data', source='strategy_design', reset_tentacle_config=False, auto_stop=True) }}"
                           type="button"
                           class="btn btn-success waves-effect m-0"
                           title="apply script changes"><i class="fas fa-redo"></i></a><div class="toolbox-btn-divider bg-dark-grey">
                    </div><a route="{{ url_for('commands', cmd='restart') }}" type="button" class="btn btn-warning waves-effect brdr-r m-0" title="Restart OctoBot"><i class="fas fa-power-off"></i></a>
                   <!-- div needs to be there else, whitespace will appear -->
               </div>
            </ul>
           <div class="fullscreen-btn-group d-flex nav-h bg-dark">
                <a class="fullscreen-size-btn minimize m-auto" href="#">
                    <i class="far fa-window-minimize"></i>
                </a>
                <a class="fullscreen-size-btn fullscreen m-auto" href="#">
                    <i class="far fa-window-maximize"></i>
                </a>
           </div>
        </div>

        <div id='main_progress_bar' style='display: none;' class="bg-dark">
            <div class="card-title">
                <h4 id="collector_progress_bar_title" class="d-none">Collecting historical data</h4>
                <h4 id="optimizer_progress_bar_title" class="d-none">Optimizer in progress</h4>
                <h4 id="backtesting_progress_bar_title" class="d-none">Backtesting in progress</h4>
            </div>

            <div class='progress'>
              <div id='progess_bar_anim' class='progress-bar progress-bar-striped progress-bar-animated'
                    role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%;'></div>
            </div>
        </div>

        <div class="tab-content soft-h-100" id="toolbox-tabcontent">
            <div class="tab-pane fade h-100" id="trading-editor" role="tabreal" aria-labelledby="trading-editor-tab">
                    {% if True %}
                    <iframe class="w-100 h-100 noBorder" src="http://localhost:8888/lab/tree/tentacles/Trading/Mode/scripted_trading_mode/trading/trading_script.py">
                    <!-- todo open active script  / default root is trading profiles-->
                    </iframe>

                    {% else %}
                    <div class="inside-tab-content bg-dark">
                        https://microsoft.github.io/monaco-editor/
                    </div>
                    {% endif %}
            </div>

            <div class="tab-pane fade h-100" id="backtesting-editor" role="tabreal" aria-labelledby="backtesting-editor-tab">

                    {% if True %}

                    <iframe class="w-100 h-100 noBorder" src="http://localhost:8888/lab/tree/tentacles/Trading/Mode/scripted_trading_mode/backtesting/backtesting_script.py">
                    <!-- todo open active script  / default root is trading profiles-->
                    </iframe>

                    {% else %}
                    <div class="inside-tab-content bg-dark">
                        https://microsoft.github.io/monaco-editor/
                    </div>
                    {% endif %}
            </div>

            <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="strategy-settings" role="tabreal" aria-labelledby="strategy-settings-tab">
                <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="tabs" role="tablist">
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector active show" id="trading-script-settings-tab" data-toggle="tab" role="tab" aria-selected="true" aria-controls="trading-script-settings" href="#trading-script-settings">Trading Script Settings</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector " id="evaluator-settings-tab" data-toggle="tab" href="#evaluator-settings" role="tab" aria-controls="evaluator-settings" aria-selected="false">Evaluator Settings</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector " id="advanced-trading-settings-tab" data-toggle="tab" href="#advanced-trading-settings" role="tab" aria-controls="advanced-trading-settings" aria-selected="false">Advanced Trading Script Settings</a>
                    </li>
                    <div class="toolbox-buttons bg-dark-grey nav-item d-flex">
                        <button class="btn btn-success btn-outline-success waves-effect user-input-save m-0"
                        data-url="{{ url_for('config_tentacles', action='update', reload='true') }}">Save and reload</button>
                    </div>
                </ul>
                <div class="tab-content bg-dark" id="strategy-settings-tabcontent">

                    <div class="tab-pane fade show active h-100" id="trading-script-settings" role="tabreal" aria-labelledby="trading-script-settings-tab">
                        <div id="trading-inputs"
                             class="user-input-config"
                             data-tentacle="{{trading_mode_name}}"
                             data-config='{{ get_tentacle_config_file_content(tentacle_class)|tojson }}'>
                        </div>
                    </div>

                    <div class="tab-pane fade h-100" id="evaluator-settings" role="tabreal" aria-labelledby="evaluator-settings-tab">


                        <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="toolbox-tabs" role="tablist">
                            {% for evaluator in activated_evaluators %}
                            <li class="nav-item waves-effect waves-light brdr-l">
                              <a class="nav-link primary-tab-selector {{ 'active show' if loop.first }}" id="{{ evaluator.get_name() }}-tab"
                                 data-toggle="tab" role="tab" aria-selected="{{'true' if loop.first else 'false'}}"
                                 aria-controls="{{ evaluator.get_name() }}-inputs" href="#{{ evaluator.get_name() }}-inputs">{{ evaluator.get_name() }}</a>
                            </li>
                            {% endfor %}
                        </ul>
                        <div class="tab-content bg-dark" id="evaluator-settings-tabcontent">
                            {% for evaluator in activated_evaluators %}
                            <div class="tab-pane fade show {{ 'active' if loop.first }} user-input-config"
                                 id="{{evaluator.get_name()}}-inputs"
                                 role="tabreal" aria-labelledby="{{evaluator.get_name()}}-tab"
                                 data-tentacle="{{evaluator.get_name()}}">
                                <h2>No user inputs settings for {{evaluator.get_name()}}.</h2>  <!-- todo for what is the dot here? -->

                                <!-- todo show only if cache is used -->
                                <h2>Delete {{evaluator.get_name()}} cache for current config</h2>
                                <p>Deletes the Cache from {{evaluator.get_name()}} for the current Version and configuration</p>
                                <div class="toolbox-buttons bg-dark nav-item d-flex">
                                    <button id="delete-current-{{evaluator.get_name()}}-cache" type="button" class="btn btn-warning btn-outline-warning waves-effect m-0">
                                    Delete {{evaluator.get_name()}} cache for current Version and configuration
                                    </button>
                                </div>
                                <h2>Delete {{evaluator.get_name()}} cache</h2>
                                <p>Deletes the whole cache for {{evaluator.get_name()}}</p>
                                <div class="toolbox-buttons bg-dark nav-item d-flex">
                                    <button id="delete-{{evaluator.get_name()}}-cache" type="button" class="btn btn-danger btn-outline-danger waves-effect m-0">
                                    Delete the whole cache for {{evaluator.get_name()}}
                                    </button>
                                </div>

                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="tab-pane fade h-100" id="advanced-trading-settings" role="tabreal" aria-labelledby="advanced-trading-settings-tab">
                        <h2>delete current Script Cache</h2>
                        <p>deletes plotting cache for the current script version, doesnt delete Evaluator Cache and orders</p>
                        <div class="toolbox-buttons bg-dark nav-item d-flex">
                            <button id="delete-script-cache" type="button"
                                    class="btn btn-warning btn-outline-warning waves-effect m-0"
                                    data-url="{{url_for('cache', action='clear_plotted_cache')}}">
                            Delete cache from current Script
                            </button>
                        </div>

                        <h2>delete all Cache</h2>
                        <p>Delete all cached values and plots for evaluators and trading scripts.</p>
                        <p>doesnt delete orders and simulated trades</p>
                        <div class="toolbox-buttons bg-dark nav-item d-flex">
                            <button id="delete-all-cache" type="button"
                                    class="btn btn-danger btn-outline-danger waves-effect m-0"
                                    data-url="{{url_for('cache', action='clear_all_cache')}}">
                            Delete all cached values and plots for evaluators and trading scripts
                            </button>
                        </div>

                        <h2>Delete simulated orders</h2>
                        <p>Deletes simulated orders from current forward test</p>
                        <div class="toolbox-buttons bg-dark nav-item d-flex">
                            <button id="delete-simulated-orders" type="button"
                                    class="btn btn-danger btn-outline-danger waves-effect m-0"
                                    data-url="{{url_for('cache', action='clear_simulated_orders_cache')}}">
                            Delete simulated orders from current forward test
                        </button>
                        </div>

                        <h2>Delete simulated trades</h2>
                        <p>Delete simulated trades from current forward test</p>
                        <div class="toolbox-buttons bg-dark nav-item d-flex">
                            <button id="delete-simulated-trades" type="button"
                                    class="btn btn-danger btn-outline-danger waves-effect m-0"
                                    data-url="{{url_for('cache', action='clear_simulated_trades_cache')}}">
                            Delete simulated trades from current forward test
                        </button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="tab-pane fade h-100 show active" id="backtesting" role="tabreal" aria-labelledby="backtesting-tab">

                <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="backtesting-tabs" role="tablist">
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="backtesting-settings-tab" data-toggle="tab" role="tab" aria-selected="false" aria-controls="backtesting-settings" href="#backtesting-settings">Backtest Settings</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector show active" id="backtesting-results-tab" data-toggle="tab" href="#backtesting-results" role="tab" aria-controls="backtesting-results" aria-selected="true">Backtesting Overview</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="performance-summary-tab" data-toggle="tab" href="#performance-summary" role="tab" aria-controls="performance-summary" aria-selected="false">Performance Summary</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="list-of-trades-tab" data-toggle="tab" href="#list-of-trades" role="tab" aria-controls="list-of-trades" aria-selected="false">List of Trades</a>
                    </li>
                    <div class="toolbox-buttons bg-dark-grey nav-item d-flex">
                        <button
                                class="btn btn-success btn-outline-success waves-effect m-0"
                                id="backtester-start-button">
                            Backtest
                        </button>
                        <button
                                class="btn btn-warning btn-outline-warning waves-effect d-none m-0"
                                id="backtester-stop-button"
                                data-stop-backtesting-url="{{url_for('backtesting', action_type='stop_backtesting')}}">
                            Stop backtest
                        </button>
                    </div>
                </ul>

                <div class="tab-content soft-h-100" id="backtesting-tabcontent">

                    <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="backtesting-settings" role="tabreal" aria-labelledby="backtesting-settings-tab">
                        <div id="backtesting-inputs">
                            <div class="row col-12 col-md-6">
                                <div class="my-auto mx-4">
                                    Start Date :
                                    <input type="date" class="datepicker" id="startDate">
                                </div>
                                <div class="my-auto mx-4">
                                    End Date :
                                    <input type="date" class="datepicker" id="endDate">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade show active w-100 h-100" id="backtesting-results" role="tabreal" aria-labelledby="backtesting-results-tab">
                        <div id="backtesting-table" class="resizable ui-resizable js-plotly-plot">
                            <div id="no-backtesting-message" class="d-none text-center mx-4 my-4">
                                <h4>
                                    No backtesting found, here you will be able to select backtestings using the {{ trading_mode_name }} for comparison.
                                </h4>
                            </div>
                            <div id="backtesting-run-select-table"
                                 data-url="{{url_for('get_run_data')}}"
                                 style="width: 100%; height: 100%;"></div>
                        </div>
                        <div class="draggable-resizer bg-dark-grey">
                        </div>
                        <div id="backtesting-run-overview" class="w-100" data-url="{{url_for('backtesting_run_plotted_data')}}">
                        </div>
                    </div>

                    <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="performance-summary" role="tabreal" aria-labelledby="performance-summary-tab">
                        <div id="backtesting-details" class="w-100">
                        </div>
                    </div>

                    <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="list-of-trades" role="tabreal" aria-labelledby="list-of-trades-tab">
                        <div id="list-of-trades-part" style="width: 100%; height: 100%;">

                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade h-100" id="trading" role="tabreal" aria-labelledby="trading-tab">

                <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="trading-tabs" role="tablist">
                    <li class="nav-item waves-effect waves-light brdr-l d-none">
                      <a class="nav-link primary-tab-selector" id="trading-settings-tab" data-toggle="tab" role="tab" aria-selected="false" aria-controls="backtesting-settings" href="#backtesting-settings">Trading Settings</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector show active"
                         id="simulated-trading-tab"
                         data-toggle="tab"
                         href="#simulated-trading"
                         role="tab" aria-controls="simulated-trading"
                         aria-selected="true">
                          Simulated Trading</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="real-trading-tab"
                         data-toggle="tab"
                         href="#real-trading"
                         role="tab" aria-controls="real-trading"
                         aria-selected="false"> <!-- todo set tab to active depending on simulated or real trading-->
                          Real Trading</a>
                    </li>
                   </ul>

                <div class="tab-content soft-h-100" id="trading-tabcontent">

                    <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="trading-settings" role="tabreal" aria-labelledby="trading-settings-tab">
                        <div id="trader-inputs">

                        </div>
                    </div>

                    <div class="tab-pane fade show active w-100 h-100" id="simulated-trading" role="tabreal" aria-labelledby="simulated-trading-tab">
                        <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="simulated-trading-tabs" role="tablist">
                            <li class="nav-item waves-effect waves-light brdr-l">
                              <a class="nav-link primary-tab-selector show active"
                                 id="forward-test-runs-tab"
                                 data-toggle="tab"
                                 href="#forward-test-runs"
                                 role="tab" aria-controls="forward-test-runs"
                                 aria-selected="true">
                                  forward test runs</a>
                            </li>
                            <li class="nav-item waves-effect waves-light brdr-l">
                              <a class="nav-link primary-tab-selector" id="open-simulated-orders-tab"
                                 data-toggle="tab"
                                 href="#open-simulated-orders"
                                 role="tab" aria-controls="open-simulated-orders"
                                 aria-selected="false">
                                  open simulated orders</a>
                            </li>
                            <li class="nav-item waves-effect waves-light brdr-l">
                              <a class="nav-link primary-tab-selector" id="simulated-trade-history-tab"
                                 data-toggle="tab"
                                 href="#simulated-trade-history"
                                 role="tab" aria-controls="simulated-trade-history"
                                 aria-selected="false">
                                  simulated trade history</a>
                            </li>
                           </ul>

                        <div class="tab-content soft-h-100" id="simulated-trading-tabcontent">
                            <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="forward-test-runs" role="tabreal" aria-labelledby="forward-test-runs-tab">

                            </div>

                            <div class="tab-pane fade show active w-100 h-100" id="open-simulated-orders" role="tabreal" aria-labelledby="open-simulated-orders-tab">

                            </div>

                            <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="simulated-trade-history" role="tabreal" aria-labelledby="simulated-trade-history-tab">

                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="real-trading" role="tabreal" aria-labelledby="real-trading-tab">





                        <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="real-trading-tabs" role="tablist">

                            <li class="nav-item waves-effect waves-light brdr-l">
                              <a class="nav-link primary-tab-selector show active"
                                 id="real-trading-runs-tab"
                                 data-toggle="tab"
                                 href="#real-trading-runs"
                                 role="tab" aria-controls="real-trading-runs"
                                 aria-selected="true">
                                  real trading runs</a>
                            </li>
                            <li class="nav-item waves-effect waves-light brdr-l">
                              <a class="nav-link primary-tab-selector" id="real-open-orders-tab"
                                 data-toggle="tab"
                                 href="#open-simulated-orders"
                                 role="tab" aria-controls="real-open-orders"
                                 aria-selected="false">
                                  real open orders</a>
                            </li>
                            <li class="nav-item waves-effect waves-light brdr-l">
                              <a class="nav-link primary-tab-selector" id="real-trading-history-tab"
                                 data-toggle="tab"
                                 href="#simulated-trade-history"
                                 role="tab" aria-controls="simulated-trade-history"
                                 aria-selected="false">
                                  real trading history</a>
                            </li>
                           </ul>

                        <div class="tab-content soft-h-100" id="real-trading-tabcontent">

                            <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="real-trading-runs" role="tabreal" aria-labelledby="real-trading-runs-tab">

                            </div>

                            <div class="tab-pane fade show active w-100 h-D100" id="real-open-orders" role="tabreal" aria-labelledby="real-open-orders-tab">

                            </div>

                            <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="real-trading-history" role="tabreal" aria-labelledby="real-trading-history-tab">

                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade scroll-vertically h-100 bg-dark" id="optimizer" role="tabreal" aria-labelledby="optimizer-tab">

                <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="optimizer-tabs" role="tablist">
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector active" id="strategy-optimizer-settings-tab" data-toggle="tab" role="tab" aria-selected="true" aria-controls="strategy-optimizer-settings" href="#strategy-optimizer-settings">Optimizer Settings</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="strategy-optimizer-queue-tab" data-toggle="tab" href="#strategy-optimizer-queue" role="tab" aria-controls="strategy-optimizer-queue" aria-selected="false">
                          Optimizer Queue
                      </a>
                    </li>
                    <div class="toolbox-buttons bg-dark-grey nav-item d-flex">
                        <button class="btn btn-success btn-outline-success waves-effect optimizer-input-save-and-start brdr-l m-0"
                                id="optimizer-input-save-and-start-button"
                                data-config-url="{{ url_for('strategy_design_config_optimizer') }}"
                                data-start-url="{{ url_for('strategy_design_start_optimizer', action='start') }}">Save and start Optimizer</button>
                        <button class="btn btn-success btn-outline-success waves-effect d-none m-0 px-2"
                                id="optimizer-resume-button"
                                data-url="{{ url_for('strategy_design_start_optimizer', action='resume') }}">Resume Optimizer</button>
                        <button class="btn btn-warning btn-outline-warning waves-effect d-none m-0"
                                id="optimizer-cancel-button"
                                data-url="{{ url_for('advanced.strategy_optimizer', update_type='cancel_optimizer') }}">Cancel Optimizer</button>
                    </div>
                </ul>
                <div class="tab-content bg-dark" id="optimizer-tabcontent">

                    <div class="tab-pane fade show active h-100" id="strategy-optimizer-settings" role="tabreal" aria-labelledby="strategy-optimizer-settings-tab">

                        <div id="strategy-optimizer-inputs">

                            {{ m_strategy_design_optimizer_settings.strategy_optimizer_setting_template() }}
                        </div>
                    </div>

                    <div class="tab-pane fade h-100" id="strategy-optimizer-queue" role="tabreal" aria-labelledby="strategy-optimizer-queue-tab">
                        <div id="no-optimizer-queue-message">
                            <h4 class="text-center my-4">
                                The strategy optimizer queue is empty.
                            </h4>
                        </div>
                        <div id="strategy-optimizer-queue-table"
                             class="w-100 h-100"
                             data-queue-url="{{url_for('strategy_design_optimizer_queue')}}">
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="{{ url_for('static', filename='css/components/side_bar.css', u=LAST_UPDATED_STATIC_FILES) }}">


<!-- Sidebar navigation -->
<div id="slide-out" class="side-nav side wide sn-bg-1 slim d-none">
      <ul class="custom-scrollbar">
        <!-- Profile Name -->
        <li>
          <div class="logo-wrapper sn-ad-avatar-wrapper">
            <!-- see https://avatars.dicebear.com/styles/bottts -->
            <a href="#"><img src="https://avatars.dicebear.com/api/bottts/:profile name.svg" class="rounded-circle"><span>Profile Name</span></a>
          </div>
        </li>
        <!--/. Profile Name -->
        <!-- Side navigation links -->
        <li>
          <ul class="collapsible collapsible-accordion">
            <li>
                <a class="collapsible-header waves-effect arrow-r active">
                    <i class="sv-slim-icon fas fa-chevron-right"></i> Submit blog<i class="fas fa-angle-down rotate-icon"></i></a>
              <div class="collapsible-body">
                <ul>
                  <li><a href="#" class="waves-effect active">
                    <span class="sv-slim"> SL </span>
                    <span class="sv-normal">Submit listing</span></a>
                  </li>
                  <li><a href="#" class="waves-effect">
                    <span class="sv-slim"> RF </span>
                    <span class="sv-normal">Registration form</span></a>
                  </li>
                </ul>
              </div>
            </li>
            <li><a class="collapsible-header waves-effect arrow-r"><i class="sv-slim-icon far fa-hand-point-right"></i> Instruction<i class="fas fa-angle-down rotate-icon"></i></a>
              <div class="collapsible-body">
                <ul>
                  <li><a href="#" class="waves-effect">
                    <span class="sv-slim"> FB </span>
                    <span class="sv-normal">For bloggers</span></a>
                  </li>
                  <li><a href="#" class="waves-effect">
                    <span class="sv-slim"> FA </span>
                    <span class="sv-normal">For authors</span></a>
                  </li>
                </ul>
              </div>
            </li>
            <li><a class="collapsible-header waves-effect arrow-r"><i class="sv-slim-icon fas fa-eye"></i> About<i class="fas fa-angle-down rotate-icon"></i></a>
              <div class="collapsible-body">
                <ul>
                  <li><a href="#" class="waves-effect">
                    <span class="sv-slim"> I </span>
                    <span class="sv-normal">Introduction</span></a>
                  </li>
                  <li><a href="#" class="waves-effect">
                    <span class="sv-slim"> MM </span>
                    <span class="sv-normal">Monthly meetings</span></a>
                  </li>
                </ul>
              </div>
            </li>
            <li><a class="collapsible-header waves-effect arrow-r"><i class="sv-slim-icon far fa-envelope"></i> Contact me<i class="fas fa-angle-down rotate-icon"></i></a>
              <div class="collapsible-body">
                <ul>
                  <li><a href="#" class="waves-effect">
                    <span class="sv-slim"> F </span>
                    <span class="sv-normal">FAQ</span></a>
                  </li>
                  <li><a href="#" class="waves-effect">
                    <span class="sv-slim"> W </span>
                    <span class="sv-normal">Write a message</span></a>
                  </li>
                </ul>
              </div>
            </li>
            <li><a id="toggle" class="waves-effect"><i class="sv-slim-icon fas fa-angle-double-left"></i>Minimize menu</a>
            </li>
          </ul>
        </li>
        <!--/. Side navigation links -->
      </ul>
      <div class="sidenav-bg rgba-blue-strong"></div>
    </div>
<!--Sidebar navigation END -->


<!-- pop out START -->

<!--<button class="btn btn-primary waves-effect waves-light" id="move-strategy-settings">-->
<!--    <i class="fas fa-pencil-alt"></i>Open draggable modal-->
<!--</button>-->

    <!-- dragable and editable bootstrap modal modal -->
    <!-- see here for more informations https://bootstrapfriendly.com/blog/how-to-make-bootstrap-modal-draggable-and-resizable/-->
<div class="modal fade" id="dragable_modal" tabindex="-1" aria-labelledby="myModalLabel2" data-backdrop="static" data-keyboard="false" style="display: none;" aria-hidden="true">
    <div class="modal-dialog ui-draggable bg-dark" role="document" style="top: 619px; left: 586px;">
        <div class="modal-content bg-dark">
            <div class="modal-header w-100 bg-dark-grey">
                <div class="row m-0 w-100">
                    <div class="col-md-12 px-4 dragable_touch d-block ui-draggable-handle">
                        <h3 class="m-0 d-inline">Strategy Settings</h3>
                        <button id="move-strategy-settings-back" type="button" class="close close_btn" data-dismiss="modal" aria-label="Close" data-backdrop="static" data-keyboard="false"><i class="fa fa-times"></i></button>
                    </div>
                </div>
            </div>

            <div id="strategy-modal-content" class="w-100 h-100">

            </div>
        </div>
    </div>
</div>
<!-- pop out END -->

{% endblock %}

{% block additional_scripts %}
<script src="{{ url_for('static', filename='js/common/backtesting_util.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/common/data_collector_util.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/common/resources_rendering.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/components/commands.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/components/strategy_design_optimizer.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/components/strategy_design_components.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/components/strategy_design.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/draggable_modal.css', u=LAST_UPDATED_STATIC_FILES) }}">

<script src="{{ url_for('static', filename='js/components/draggable_modal.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>


{% endblock additional_scripts %}
