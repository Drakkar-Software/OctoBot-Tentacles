{% extends "layout.html" %}
{% set active_page = "strategy_design" %}
{% set show_nab_bar = False %}

{% import 'macros/strategy_design_optimizer_settings.html' as m_strategy_design_optimizer_settings %}


{% block body %}


<style>

/** colors **/
:root {
    --bg: #131722;
    --fnt: #b2b5be;
    --brdr: #2a2e39;
    --brdr-actv: #1e53e5;
    --fnt-hvr: #131722;
    --bg-hvr: #2a2e39;
    --fnt-actv: #1e53e5;
}


/** reusable **/
.bg-dark, .form-control options, ul {
    background: var(--bg) !important;
    color: var(--fnt) !important;
}

.bg-dark-grey {
    background: var(--bg-hvr);
}

.bg-hvr:hover {
    background: var(--bg-hvr);
}

.noBorder {
    border:none !important
}

.brdr-b {
    border-bottom: 1px solid var(--brdr);
}

.brdr-t {
    border-top: 1px solid var(--brdr);
}

.brdr-t-xl {
    border-top: 4px solid var(--brdr) !important;
}

.brdr-l {
    border-left: 1px solid var(--brdr) !important;
}

.brdr-r, .toolbox-tabs > li:last-of-type {
    border-right: 1px solid var(--brdr) !important;
}

.card, .card-body {
    background-color: #131722 !important;
    border: 1px solid #2a2e39 !important;
}

.scroll_horizontal {
    display: unset;
    overflow-x: scroll;
    overflow-y: hidden;
    white-space: nowrap;
    -ms-overflow-style: none;
    scrollbar-width: none;
}

.scroll_horizontal li {
    display: inline-block;
}

/** reusable END **/

/*TODO*/

.main-toolbox-tabs .toolbox-buttons {
    margin-right: 50px;
}

.main-toolbox-tabs li:first-child {
    margin-left: 50px;
}

.toolbox-tabs > li > a {
    color: #b2b5be;
    padding: 11px 2rem;
    border: none !important;
}

.toolbox-tabs > li > a.active {
    color: #1e53e5 !important;
    border: none !important;
    background: none !important;
}

.toolbox-tabs > li > a:hover {
    border-color: unset !important;
    border: none !important;
    background: #2a2e39;
    border-radius: unset;
}



.strategy-toolbox {
    position: absolute;
}
#toolbox .tab-content > div {
    height: 100%;
}

.ui-resizable-s {
    height: 20px;
    width: 100%;
    bottom: -10px;
    left: 0;
}

body {
    /* looks better and gives more space */
    line-height: unset;
}


/** Charts **/

.hoverlayer line:first-child, .hoverlayer line:nth-child(3) {
    stroke: unset;
}

/** cahrts END **/


/** Toolbox **/
/** Toolbox Tabbar **/

#octobot-logo img {
  width: 30px;
  margin-right:4px;
  float: left;
}

#octobot-logo h4 {
  margin: auto;
  float: left;
}

.toolbox-buttons .btn {
    border-radius: 0;
    background-color: #131722 !important;
    font-size: 1rem;
    text-transform: unset;
    padding: 8px 2rem;
}

.toolbox-buttons .btn-warning, .w2ui-btn {
    color: #fb3;
}

.toolbox-buttons .btn-warning:hover, .toolbox-buttons .btn .btn-warning .btn-outline-warning:hover, .w2ui-btn:hover {
    background: #fb3 !important;
    color: #fff !important;
}

.toolbox-buttons .btn-success, .w2ui-btn-blue {
    color: #00c851;
}



.toolbox-buttons .btn-success:hover, .w2ui-btn-blue:hover {
    background: #00c851 !important;
    color: #fff;
}

.toolbox-btn-divider {
    display: inline-block;
    width: 1px;
}

#toolbox .dropdown-menu a {
    border-radius:0;
    border-color: #2a2e39;
}

#toolbox .dropdown-menu a:hover {
    background: #2a2e39;
}

.dropdown-menu {
    border: solid 1px var(--brdr-actv);
    border-radius: .25rem;
}

.nav-tabs .nav-link:focus, .nav-tabs .nav-link:hover {
    border-color: var(--brdr);
    border-radius: 0;
    background: var(--bg-hvr) !important;
}

#backtesting-settings, #list-of-trades, #performance-summary, #strategy-settings, #optimizer {
    overflow-y: scroll;
}


#backtesting-chart {
    height:50%;
    width: 100%
}

#backtesting-table {
    height:50%;
    width: 100%;
    max-height: 98%;
}

#strategy-optimizer-inputs *{
    border-color: #2a2e39 !important;
}

#strategy-optimizer-inputs > .mx-4 > .row.border > div {
    line-height: 1.5;
    padding: 8px 2rem;
}


.strategy-toolbox .btn-outline-success {
    border: 1px solid #00c851 !important;
    6.8px 2rem !important
}

.strategy-toolbox .btn-outline-success:hover {
    color:#fff !important;
}

/** toolbox resize buttons **/
.fullscreen-btn-group {
    float: right;
    right: 8px;
    position: fixed;
}

.fullscreen-size-btn i {
    font-size: 20px;
    align-items: center;
    border-radius: 4px;
    cursor: default;
    display: flex;
    height: 30px;
    justify-content: center;
    width: 30px;
    color: #b2b5be;
}

button.fullscreen-size-btn:hover {
    background: #2a2e39;
}

button.fullscreen-size-btn {
    background: none;
    border:none;
    margin-top: 4px;
}

.fullscreen-size-btn.is-full-screen i {
    color: #1e53e5;
}

/** toolbox resize buttons END **/

#backtesting-tabcontent {
    height: 100%;
}



.footer-copyright {
    background-color: #131722 !important;
    border-top-color: #2a2e39 !important;
    border-top: solid 2px;
}


/* w2ui template  */

.toolbox-buttons > button, .w2ui-btn {
    margin: 0;
}

.form-control, input, .w2ui-overlay *, .w2ui-overlay select, .w2ui-btn {
    background-color: #131722 !important;
    color: #b2b5be !important;
    border-color: #2a2e39;
    background-image: unset !important;
}

.w2ui-btn {
    border-radius: 0 !important;
    background-color: #131722 !important;
    font-size: 1rem !important;
    text-transform: unset !important;
    padding: 8px 2rem !important;
    border-color: #fb3 !important;
    box-shadow: unset !important;
    color: #fb3 ! important;
}

.w2ui-btn-blue {
    color: #00c851 !important;
    border-color: #00c851 !important;
}

#strategy_body .w2ui-record, .w2ui-btn {
    border: 1px solid #2a2e39;
}
.w2ui-btn.close-btn {
    padding: 24px 9px !important;
    padding-top: 24px;
}

#strategy_body .w2ui-empty-record, #strategy_body .w2ui-empty-record:hover, #strategy_body .w2ui-grid-footer,  #strategy_body .w2ui-grid-columns, #strategy_body .w2ui-grid-columns *, #strategy_body .w2ui-grid-toolbar, #strategy_body .w2ui-grid-toolbar *, #strategy_body .w2ui-grid-header, #strategy_body .w2ui-record, #strategy_body .grid_RSI_footer {
    background-color: #131722;
    color: #b2b5be;
    background-image: unset;
}

.w2ui-empty-record *, .w2ui-empty-record {
    border: none !important;
    box-shadow:none;
}

.w2ui-overlay tr:hover, #strategy_body .w2ui-grid-toolbar td:hover, #strategy_body .w2ui-grid-toolbar tr:hover, #strategy_body .w2ui-grid-toolbar table:hover, #strategy_body .w2ui-grid-toolbar tbody:hover, #strategy_body .w2ui-grid-toolbar table tbody tr:hover td, #strategy_body .w2ui-grid-toolbar table.dataTable tbody tr:hover td {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
}

#strategy_body .w2ui-grid-header {
    font-size: 1rem;
    height:unset;
    padding: 4px;
}

.w2ui-grid-data-spacer, .w2ui-grid-data  {
    border-bottom: unset !important;
}

#strategy_body .w2ui-selected {
    color: #1e53e5 !important;
    background: #2a2e39 !important;
    border: 1px solid #131722;
}

.w2ui-column-check {
    background: #fff !important;
    color: #131722 !important;
}

.w2ui-grid .w2ui-grid-body table .w2ui-col-number {
    background-color: unset !important;
}

/** W2ui END **/


/** user inputs **/
.select2-container--default .select2-selection--multiple {
    background-color: var(--bg);
    border: 1px solid var(--brdr);
}

.select2-container--default .select2-results__option--highlighted.select2-results__option--selectable {
    background: var(--bg-hvr) !important;
    color: var(--fnt) !important;
}

.select2-container--default .select2-results__option--selected {
    background-color: var(--bg-hvr) !important;
    color: var(--fnt-actv) !important;
}

.select2-container--default.select2-container--focus .select2-selection--multiple {
    border: solid var(--brdr-actv) 1px;
}

.select2-dropdown, .select2-selection__choice {
    border-color: var(--brdr-actv);
}

.form-control:focus {
    border-color: var(--brdr-actv);
    box-shadow: unset;
}


/** user inputs END **/


/** navbar **/
.navbar-toggler, .timeframe-toggler {
    color: #b2b5be
}

.navbar-toggler {
    border-radius: 0;
    padding: 0 12px !important;
    line-height: 41px;
    height: 41px;
    display: block;
}

#nav-toolbox {
    margin: 0;
}

#pairs-tabs::-webkit-scrollbar {
    display: none;
}
#pairs-tabs {
    min-width: 60%;
    height: 41px;
}

#time-frame-selector {
    max-width: calc(40% - 31.5px);
}



#pairs-tabcontent > .tab-pane {
    height: 100%;
}

#nav-bar-left {
    display: flex;
    height: 41px;
    min-width: calc(100vw - 356px - 44.5px);
    max-width: calc(100vw - 356px - 44.5px);
    padding: 0;
    margin: 0;
}

#nav-bar-left .active-timeframe a {
    height: 41px;
    padding: 0 10px;
    display: block;
    line-height: 41px;
    color: #b2b5be;
}
.timeframe-toggler i, .add-evaluator {
     font-size: 12px;
}


#nav-bar-left a.timeframe-toggler {
    padding: 0 10px;
    line-height: 41px;
}

#nav-bar-left .active-timeframe.selected a {
    color: #1e53e5 ;
}

.nav-tabs .nav-item {
    margin-bottom: 0;
}

#nav-bar-right {
    border-top: 0;
    height: 41px;
    flex-direction: row-reverse;
    padding: 0;
}

#nav-bar-right a {
    line-height: 41px;
    padding: 0 10px;
}

#nav-toolbox {
    border-bottom: 1px solid #2a2e39;

}

/** navbar END **/

/** mobile fixes **/

@media only screen and (max-width: 1200px) {
    #nav-bar-left {
    min-width: calc(100vw - 227px - 44.5px);
    max-width: calc(100vw - 227px - 44.5px);
    }
}

/** temp fixes **/

/*Force full screen*/
.container-fluid {
    margin: 0;
    padding: 0;
}

#new-nav{
    display: flex;
}

</style>

<nav id="new-nav" class="brdr-b">
    <div class="main-dropdown-menu brdr-r">
        <a role="button" aria-expanded="false" type="button" class="navbar-toggler" data-toggle="dropdown">
            <span><i class="fas fa-bars"></i></span>
        </a>
        <div class="dropdown-menu dropdown-default bg-dark" style="">
            <a href="{{ url_for('home') }}" class="nav-link primary-tab-selector bg-dark"><i class="fas fa-home"></i> Home</a>
            <a href="{{ url_for('trading') }}" class="nav-link primary-tab-selector bg-dark"><i class="fas fa-chart-line"></i> Trading</a>
            <a href="{{ url_for('portfolio') }}" class="nav-link primary-tab-selector bg-dark"><i class="fas fa-chart-pie"></i> Portfolio</a>
            <a href="{{ url_for('profile') }}" class="nav-link primary-tab-selector bg-dark"><i class="fas fa-cog"></i> Profile</a>
            <a href="{{ url_for('accounts') }}" class="nav-link primary-tab-selector bg-dark"><i class="fas fa-link"></i> Accounts</a>
            <a href="{{ url_for('community') }}" class="nav-link primary-tab-selector bg-dark"><i class="fas fa-rss-square"></i> Community</a>
            <a href="{{ url_for('octobot_help') }}" class="nav-link primary-tab-selector bg-dark"><i class="fas fa-question-circle"></i> Help</a>
            <a href="{{ url_for('about') }}" class="nav-link primary-tab-selector bg-dark"><i class="fas fa-info-circle"></i> About</a>
        </div>
    </div>
    <ul class="nav nav-tabs md-tabs  toolbox-tabs row bg-dark noBorder w-100" id="nav-toolbox" role="tablist">
        <ul id="nav-bar-left" class="nav nav-tabs md-tabs col-9 toolbox-tabs bg-dark noBorder">
            <span id="time-frame-selector" class="scroll_horizontal">
                <!-- repeat for each activated timeframe -->
                {% for time_frame in time_frames %}
                <li data-time_frame="{{time_frame}}" class="active-timeframe {{'selected' if loop.first}} bg-hvr h-100" id="active-{{time_frame}}-timeframe">
                  <a>{{time_frame}}</a>
                </li>
                {% endfor %}
            </span>

            <li class="dropdown h-100">
                <a class="nav-link timeframe-toggler" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                    <span><i class="fas fa-chevron-down"></i></span>
                </a>
                <form class="dropdown-menu dropdown-default bg-dark">
                    <!-- repeat for each available timeframe -->
                    {% for time_frame in exchange_time_frames %}
                    <div class="nav-link primary-tab-selector bg-dark" id="inactive-{{time_frame}}-timeframe">
                        <div class="row">
                            <div class="col-7">
                                {{time_frame}}
                            </div>
                            <div data-schematype="boolean" class="col-5">
                                <div class="checkbox custom-control custom-switch">
                                    <input type="checkbox" data-time_frame="{{time_frame}}"
                                           id="{{time_frame}}-setting" class="custom-control-input" {{'checked' if time_frame in enabled_time_frames}}>
                                    <label class="custom-control-label" for="{{time_frame}}-setting"></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </form>
            </li>
            <ul class="nav nav-tabs md-tabs toolbox-tabs bg-dark noBorder scroll_horizontal" id="pairs-tabs" role="tablist">
                {% for symbol in symbols %}
                <li class="nav-item waves-effect waves-light brdr-l h-100">
                  <a class="nav-link primary-tab-selector h-100 symbol-selector show {{ 'active' if loop.first }}" id="{{symbol}}-tab" data-toggle="tab"
                     role="tab" aria-selected="{{ 'true' if first else 'false' }}" aria-controls="{{symbol}}"
                     href="#{{symbol}}"
                     data-symbol="{{symbol}}">
                      {{symbol}}
                  </a>
                </li>
                {% endfor %}
            </ul>
        </ul>
        <ul id="nav-bar-right" class="nav nav-tabs md-tabs toolbox-tabs bg-dark brdr-l noBorder">

            <li class="nav-item waves-effect waves-light brdr-l">
                <a class="nav-link waves-effect waves-light" href="{{ url_for('logs') }}" aria-label="Logs">
                    <i class="fa fa-bell" data-toggle="tooltip" data-placement="top" title="" data-original-title="Event logs">
                        <span id="errors-count-badge" class="badge badge-warning"></span>
                    </i>
                </a>
            </li>
            <li class="nav-item waves-effect waves-light brdr-l">
                {% if (not is_login_required()) or (is_login_required() and is_authenticated()) %}
                <a class="nav-link" href="#" id="switchTradingState" aria-label="TradingSwitch">
                    {{ m_trading_state.display_trading_state(is_real_trading(get_current_profile()), get_enabled_trader(get_current_profile())) }}
                </a>
                {% endif %}
            </li>
            <li class="nav-item waves-effect waves-light brdr-r h-100" id="add-evaluators">
              <a class="nav-link primary-tab-selector">
                  <a href="{{ url_for('advanced.evaluator_config') }}" class="nav-link primary-tab-selector bg-dark">
                      <i class="fas fa-atom"></i> Evaluators <i class="fas fa-plus add-evaluator"></i>
                  </a>
              </a>
            </li>
        </ul>
    </ul>
</nav>

<div id="strategy_body" class="strategy_body bg-dark">
    <div class="resizable" id="pairs-tabcontent">
        <div class="h-100" id="charts-div" role="tabreal">
            <div id="charts"
                 data-live-url="{{url_for('plotted_data', exchange_id=exchange_id)}}"
                 data-backtesting-url="{{url_for('backtesting_main_plotted_data', exchange_id=exchange_id)}}"
                 data-backtesting-run-id-url="{{url_for('backtesting_run_id', stop_backtesting=True)}}"
            >
                <div id="main-chart" class="resizable" >
                </div>
                <div class="draggable-resizer">
                </div>
                <div id="sub-chart" class="">
                </div>
            </div>
        </div>
    </div>


    <div id="toolbox" class="strategy-toolbox bg-dark">
        <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs main-toolbox-tabs bg-dark brdr-t-xl brdr-b" id="main-toolbox-tabs" role="tablist">
            <div class="my-auto mr-4">
                <div class="my-auto mr-4" id="octobot-logo">
                <img  src="{{url_for('static', filename='img/svg/octobot.svg')}}" alt="octobot-logo">
                <h4>
                    OctoBot
                </h4>
                </div>
            </div>
            <li class="nav-item dropdown brdr-l">
                <a class="nav-link dropdown-toggle collapsed" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                aria-expanded="false">Code Editor</a>
                <div class="dropdown-menu dropdown-default bg-dark">
                    <a class="nav-link primary-tab-selector bg-dark" id="trading-editor-tab" data-toggle="tab" href="#trading-editor" role="tab"
                    aria-controls="trading-editor"
                    aria-selected="false">
                    trading script editor
                    </a>
                    <a class="nav-link primary-tab-selector bg-dark" id="backtesting-editor-tab" data-toggle="tab" href="#backtesting-editor" role="tab"
                    aria-controls="backtesting-editor"
                    aria-selected="false">
                    backtesting script editor
                    </a>
                </div>
            </li>
            <li class="nav-item brdr-l">
                <a class="nav-link primary-tab-selector" id="strategy-settings-tab" data-toggle="tab" href="#strategy-settings" role="tab"
                   aria-controls="strategy-settings"
                   aria-selected="true">
                    Strategy Settings
                </a>
            </li>
            <li class="nav-item brdr-l">
                <a class="nav-link primary-tab-selector active show" id="backtesting-tab" data-toggle="tab" href="#backtesting" role="tab"
                   aria-controls="backtesting"
                   aria-selected="false">
                    Backtesting
                </a>
            </li>
            <li class="nav-item brdr-l">
                <a class="nav-link primary-tab-selector" id="optimizer-tab" data-toggle="tab" href="#optimizer" role="tab"
                   aria-controls="optimizer"
                   aria-selected="false">
                    Strategy Optimizer
                </a>
            </li>
           <div class="toolbox-buttons bg-dark-grey">
               <button id="reload-script"
                       data-url="{{ url_for('update_plot_script') }}"
                       data-backtesting-url="{{ url_for('backtesting', action_type='start_backtesting_with_current_bot_data', source='strategy_design', reset_tentacle_config=False) }}"
                       data-exchange-id="{{ exchange_id }}"
                       type="button"
                       class="btn btn-success waves-effect">Reload script</button><div class="toolbox-btn-divider">
                </div><button route="{{ url_for('commands', cmd='restart') }}" type="button" class="btn btn-warning waves-effect brdr-r">Restart Octobot</button>
               <!-- div needs to be there else, whitespace will appear -->
           </div>
           <div class="fullscreen-btn-group">
                <button class="fullscreen-size-btn minimize">
                    <i class="far fa-window-minimize"></i>
                </button>
                <button class="fullscreen-size-btn fullscreen">
                    <i class="far fa-window-maximize"></i>
                </button>
           </div>
        </ul>

         <span id='backtesting_progress_bar' style='display: none;'>
            <div class="card-title">
                <h4 id="optimizer_progress_bar_title">Optimizer in progress</h4>
                <h4 id="backtesting_progress_bar_title">Backtesting in progress</h4>
            </div>

            <div class='progress'>
              <div id='progess_bar_anim' class='progress-bar progress-bar-striped progress-bar-animated'
                    role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100' style='width: 0%;'></div>
            </div>
        </span>

        <div class="tab-content bg-dark" id="toolbox-tabcontent">
            <div class="tab-pane fade" id="trading-editor" role="tabreal" aria-labelledby="trading-editor-tab">
                    {% if True %}
                    <iframe class="w-100 h-100 noBorder" src="http://localhost:8888/lab/tree/tentacles/Trading/Mode/scripted_trading_mode/trading/trading_script.py">
                    <!-- todo open active script  / default root is trading profiles-->
                    </iframe>

                    {% else %}
                    <div class="inside-tab-content bg-dark">
                        https://microsoft.github.io/monaco-editor/
                    </div>
                    {% endif %}
            </div>

            <div class="tab-pane fade" id="backtesting-editor" role="tabreal" aria-labelledby="backtesting-editor-tab">

                    {% if True %}

                    <iframe class="w-100 h-100 noBorder" src="http://localhost:8888/lab/tree/tentacles/Trading/Mode/scripted_trading_mode/backtesting/backtesting_script.py">
                    <!-- todo open active script  / default root is trading profiles-->
                    </iframe>

                    {% else %}
                    <div class="inside-tab-content bg-dark">
                        https://microsoft.github.io/monaco-editor/
                    </div>
                    {% endif %}
            </div>

            <div class="tab-pane fade" id="strategy-settings" role="tabreal" aria-labelledby="strategy-settings-tab">
                <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="tabs" role="tablist">
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector active show" id="trading-script-settings-tab" data-toggle="tab" role="tab" aria-selected="true" aria-controls="trading-script-settings" href="#trading-script-settings">Trading Script Settings</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector " id="evaluator-settings-tab" data-toggle="tab" href="#evaluator-settings" role="tab" aria-controls="evaluator-settings" aria-selected="false">Evaluator Settings</a>
                    </li>
                    <div class="toolbox-buttons bg-dark-grey">
                        <button class="btn btn-success btn-outline-success waves-effect user-input-save"
                        data-url="{{ url_for('config_tentacles', action='update', reload='true') }}">Save and reload</button>
                    </div>
                </ul>
                <div class="tab-content bg-dark" id="strategy-settings-tabcontent">

                    <div class="tab-pane fade show active" id="trading-script-settings" role="tabreal" aria-labelledby="trading-script-settings-tab">
                        <div id="trading-inputs"
                             class="user-input-config"
                             data-tentacle="{{trading_mode_name}}"
                             data-config='{{ get_tentacle_config_file_content(tentacle_class)|tojson }}'>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="evaluator-settings" role="tabreal" aria-labelledby="evaluator-settings-tab">


                        <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="tabs" role="tablist">
                            {% for evaluator in activated_evaluators %}
                            <li class="nav-item waves-effect waves-light brdr-l">
                              <a class="nav-link primary-tab-selector {{ 'active show' if loop.first }}" id="{{ evaluator.get_name() }}-tab"
                                 data-toggle="tab" role="tab" aria-selected="{{'true' if loop.first else 'false'}}"
                                 aria-controls="{{ evaluator.get_name() }}-inputs" href="#{{ evaluator.get_name() }}-inputs">{{ evaluator.get_name() }}</a>
                            </li>
                            {% endfor %}
                        </ul>
                        <div class="tab-content bg-dark" id="evaluator-settings-tabcontent">
                            {% for evaluator in activated_evaluators %}
                            <div class="tab-pane fade show {{ 'active' if loop.first }} user-input-config"
                                 id="{{evaluator.get_name()}}-inputs"
                                 role="tabreal" aria-labelledby="{{evaluator.get_name()}}-tab"
                                 data-tentacle="{{evaluator.get_name()}}"
                                 data-config='{{ get_tentacle_config_file_content(evaluator)|tojson }}'>
                                No user inputs settings for {{evaluator.get_name()}}.
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>


            <div class="tab-pane fade show active" id="backtesting" role="tabreal" aria-labelledby="backtesting-tab">

                <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="backtesting-tabs" role="tablist">
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="backtesting-settings-tab" data-toggle="tab" role="tab" aria-selected="false" aria-controls="backtesting-settings" href="#backtesting-settings">Backtest Settings</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector show active" id="backtesting-results-tab" data-toggle="tab" href="#backtesting-results" role="tab" aria-controls="backtesting-results" aria-selected="true">Backtesting Overview</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="performance-summary-tab" data-toggle="tab" href="#performance-summary" role="tab" aria-controls="performance-summary" aria-selected="false">Performance Summary</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="list-of-trades-tab" data-toggle="tab" href="#list-of-trades" role="tab" aria-controls="list-of-trades" aria-selected="false">List of Trades</a>
                    </li>
                    <div class="toolbox-buttons bg-dark-grey">
                        <button
                                class="btn btn-success btn-outline-success waves-effect"
                                id="backtester-start-button">
                            Backtest
                        </button>
                        <button
                                class="btn btn-warning btn-outline-warning waves-effect d-none"
                                id="backtester-stop-button"
                                data-stop-backtesting-url="{{url_for('backtesting', action_type='stop_backtesting')}}">
                            Stop backtest
                        </button>
                    </div>
                </ul>

                <div class="tab-content bg-dark" id="backtesting-tabcontent">

                    <div class="tab-pane fade" id="backtesting-settings" role="tabreal" aria-labelledby="backtesting-settings-tab">
                        <div id="backtesting-inputs">
                            <div class="row col-12 col-md-6">
                                <div class="my-auto mx-4">
                                    Start Date :
                                    <input type="date" class="datepicker" id="startDate">
                                </div>
                                <div class="my-auto mx-4">
                                    End Date :
                                    <input type="date" class="datepicker" id="endDate">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade show active" id="backtesting-results" role="tabreal" aria-labelledby="backtesting-results-tab">
                        <div id="backtesting-table" class="resizable ui-resizable js-plotly-plot">
                            <div id="no-backtesting-message" class="d-none text-center mx-4 my-4">
                                <h4>
                                    No backtesting found, here you will be able to select backtestings using the {{ trading_mode_name }} for comparison.
                                </h4>
                            </div>
                            <div id="backtesting-run-select-table"
                                 data-url="{{url_for('get_run_data')}}"
                                 style="width: 100%; height: 100%;"></div>
                        </div>
                        <div class="draggable-resizer">
                        </div>
                        <div id="backtesting-chart" data-url="{{url_for('backtesting_run_plotted_data')}}">
                        </div>
                    </div>

                    <div class="tab-pane fade" id="performance-summary" role="tabreal" aria-labelledby="performance-summary-tab">

                    </div>

                    <div class="tab-pane fade" id="list-of-trades" role="tabreal" aria-labelledby="list-of-trades-tab">
                        <div id="list-of-trades-part" style="width: 100%; height: 100%;">

                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="optimizer" role="tabreal" aria-labelledby="optimizer-tab">

                <ul class="nav nav-tabs md-tabs justify-content-center toolbox-tabs bg-dark brdr-t brdr-b" id="optimizer-tabs" role="tablist">
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector show active" id="strategy-optimizer-settings-tab" data-toggle="tab" role="tab" aria-selected="false" aria-controls="strategy-optimizer-settings" href="#strategy-optimizer-settings">Optimizer Settings</a>
                    </li>
                    <li class="nav-item waves-effect waves-light brdr-l">
                      <a class="nav-link primary-tab-selector" id="strategy-optimizer-results-tab" data-toggle="tab" href="#strategy-optimizer-results" role="tab" aria-controls="strategy-optimizer-results" aria-selected="true">Optimizer Results</a>
                    </li>
                    <div class="toolbox-buttons bg-dark-grey">
                        <button class="btn btn-success btn-outline-success waves-effect optimizer-input-save-and-start brdr-l"
                                id="optimizer-input-save-and-start-button"
                                data-exchange-id="{{ exchange_id }}"
                                data-config-url="{{ url_for('strategy_design_config_optimizer') }}"
                                data-start-url="{{ url_for('strategy_design_start_optimizer') }}">Save and start Optimizer</button>
                        <button class="btn btn-warning btn-outline-warning waves-effect d-none"
                                id="optimizer-cancel-button"
                                data-url="{{ url_for('advanced.strategy_optimizer', update_type='cancel_optimizer') }}">Cancel Optimizer</button>
                    </div>
                </ul>
                <div class="tab-content bg-dark" id="optimizer-tabcontent">

                    <div class="tab-pane fade show active" id="strategy-optimizer-settings" role="tabreal" aria-labelledby="strategy-optimizer-settings-tab">

                        <div id="strategy-optimizer-inputs">

                            {{ m_strategy_design_optimizer_settings.strategy_optimizer_setting_template() }}
                        </div>
                    </div>

                    <div class="tab-pane fade" id="strategy-optimizer-results" role="tabreal" aria-labelledby="strategy-optimizer-results-tab">
                        <div id="strategy-optimizer-chart-or-tables">
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block additional_scripts %}
<script src="{{ url_for('static', filename='js/common/backtesting_util.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/components/commands.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/components/strategy_design_optimizer.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/components/strategy_design_components.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
<script src="{{ url_for('static', filename='js/components/strategy_design.js', u=LAST_UPDATED_STATIC_FILES) }}"></script>
{% endblock additional_scripts %}
